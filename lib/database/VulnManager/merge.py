import os
import sys
_runPath = os.path.dirname(os.path.realpath(__file__))

code=""
for path in ["Head.py", "Add.py", "Get-IDs.py", "Get-Names.py", "Get-Objects.py", "Get-IDs.py", "Get-Dicts.py", "Update.py", "Calculations.py", "Tail.py"]:
  code += "# -- %s --\n"% path
  code += (open(os.path.join(_runPath, path), "r").read())

if not os.path.isfile("__init__.py.bak"):     # if a copy of the original file does
  os.rename("__init__.py", "__init__.py.bak") # not already exist, back it up
if not os.path.isfile("__init-orig__.py"):                          # if this is the first "merge",
  open(os.path.join(_runPath, "__init-orig__.py"), "w").write(code) # create a copy to diff later
else:                                                                    # else (over)write the previous
  open(os.path.join(_runPath, "__init-previous__.py"), "w").write(code) # changes

open(os.path.join(_runPath, "__init__.py"), "w").write(code)
